(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["underscore","lib/platform/features"],function(b,c){var d;return d=function(){function d(){this.get_runability_of_all_features=a(this.get_runability_of_all_features,this),this.get_runability_by_feature=a(this.get_runability_by_feature,this),this.is_feature_needed=a(this.is_feature_needed,this)}return d.prototype._features=[{id:"localstorage",is_needed:!1,display_name:"Local Storage"},{id:"touch",is_needed:!1,display_name:"Touch"},{id:"websockets",is_needed:!0,display_name:"Web Sockets"}],d.prototype._feature_runabilities=[{is_present:!1,is_needed:!1,runability:1},{is_present:!1,is_needed:!0,runability:0},{is_present:!0,is_needed:!1,runability:2},{is_present:!0,is_needed:!0,runability:2}],d.prototype.is_feature_needed=function(a){return b.find(this._features,function(b){return b.id===a}).is_needed},d.prototype.is_feature_present=function(a){return c[a]},d.prototype.get_runability_by_feature=function(c){return b.find(this._feature_runabilities,a(function(a){return a.is_present===this.is_feature_present(c)&&a.is_needed===this.is_feature_needed(c)},this)).runability},d.prototype.get_runability_of_all_features=function(){var a;return b.min(function(){var c,d,e,f;e=b.pluck(this._features,"id"),f=[];for(c=0,d=e.length;c<d;c++)a=e[c],f.push(this.get_runability_by_feature(a));return f}.call(this))},d}(),new d})}).call(this);