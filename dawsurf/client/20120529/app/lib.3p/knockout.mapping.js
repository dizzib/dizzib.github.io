(function(a){a(ko,ko.mapping={})})(function(a,b){function j(a,b){for(var c in b)b.hasOwnProperty(c)&&b[c]&&(!c||!a[c]||a[c]instanceof Array?a[c]=b[c]:j(a[c],b[c]))}function k(a,b){var c={};return j(c,a),j(c,b),c}function l(a,b){a=a||{};if(a.create instanceof Function||a.update instanceof Function||a.key instanceof Function||a.arrayChanged instanceof Function)a={"":a};return b&&(a.ignore=m(b.ignore,a.ignore),a.include=m(b.include,a.include),a.copy=m(b.copy,a.copy)),a.ignore=m(a.ignore,i.ignore),a.include=m(a.include,i.include),a.copy=m(a.copy,i.copy),a.mappedProperties=a.mappedProperties||{},a}function m(a,c){return a instanceof Array||(b.getType(a)==="undefined"?a=[]:a=[a]),c instanceof Array||(b.getType(c)==="undefined"?c=[]:c=[c]),a.concat(c)}function n(b,c){var e=a.dependentObservable;a.dependentObservable=function(c,e,f){f=f||{};var g=f.deferEvaluation;c&&typeof c=="object"&&(f=c);var h=!1,i=function(c){var e=d({read:function(){return h||(a.utils.arrayRemoveItem(b,c),h=!0),c.apply(c,arguments)},write:function(a){return c(a)},deferEvaluation:!0});return e.__ko_proto__=d,e};f.deferEvaluation=!0;var j=new d(c,e,f);return j.__ko_proto__=d,g||(b.push(j),j=i(j)),j},a.computed=a.dependentObservable;var f=c();return a.dependentObservable=e,a.computed=a.dependentObservable,f}function o(d,e,h,i,j,l){var m=a.utils.unwrapObservable(e)instanceof Array;l=l||"";if(b.isMapped(d)){var q=a.utils.unwrapObservable(d)[c];h=k(q,h)}var v={data:e,parent:j},w=function(){return h[i]&&h[i].create instanceof Function},x=function(a){return n(f,function(){return h[i].create({data:a||v.data,parent:v.parent})})},y=function(){return h[i]&&h[i].update instanceof Function},z=function(b,c){var d={data:c||v.data,parent:v.parent,target:a.utils.unwrapObservable(b)};return a.isWriteableObservable(b)&&(d.observable=b),h[i].update(d)},A=g.get(e);if(A)return A;i=i||"";if(!m)if(!u(e))switch(b.getType(e)){case"function":y()?a.isWriteableObservable(e)?(e(z(e)),d=e):d=z(e):d=e;break;default:a.isWriteableObservable(d)?y()?d(z(d)):d(a.utils.unwrapObservable(e)):(w()?d=x():d=a.observable(a.utils.unwrapObservable(e)),y()&&d(z(d)))}else{d=a.utils.unwrapObservable(d);if(!d){if(w()){var B=x();return y()&&(B=z(B)),B}if(y())return z(B);d={}}y()&&(d=z(d)),g.save(e,d),t(e,function(b){var c=l.length?l+"."+b:b;if(a.utils.arrayIndexOf(h.ignore,c)!=-1)return;if(a.utils.arrayIndexOf(h.copy,c)!=-1){d[b]=e[b];return}var f=g.get(e[b]),i=f||o(d[b],e[b],h,b,d,c);a.isWriteableObservable(d[b])?d[b](a.utils.unwrapObservable(i)):d[b]=i,h.mappedProperties[c]=!0})}else{var C=[],D=!1,E=function(a){return a};h[i]&&h[i].key&&(E=h[i].key,D=!0),a.isObservable(d)||(d=a.observableArray([]),d.mappedRemove=function(a){var b=typeof a=="function"?a:function(b){return b===E(a)};return d.remove(function(a){return b(E(a))})},d.mappedRemoveAll=function(b){var c=s(b,E);return d.remove(function(b){return a.utils.arrayIndexOf(c,E(b))!=-1})},d.mappedDestroy=function(a){var b=typeof a=="function"?a:function(b){return b===E(a)};return d.destroy(function(a){return b(E(a))})},d.mappedDestroyAll=function(b){var c=s(b,E);return d.destroy(function(b){return a.utils.arrayIndexOf(c,E(b))!=-1})},d.mappedIndexOf=function(b){var c=s(d(),E),e=E(b);return a.utils.arrayIndexOf(c,e)},d.mappedCreate=function(b){if(d.mappedIndexOf(b)!==-1)throw new Error("There already is an object with the key that you specified.");var c=w()?x(b):b;if(y()){var e=z(c,b);a.isWriteableObservable(c)?c(e):c=e}return d.push(c),c});var F=s(a.utils.unwrapObservable(d),E).sort(),G=s(e,E);D&&G.sort();var H=a.utils.compareArrays(F,G),I={},J=[];for(var K=0,L=H.length;K<L;K++){var M=H[K],N,O=l+"["+K+"]";switch(M.status){case"added":var P=r(a.utils.unwrapObservable(e),M.value,E);N=o(undefined,P,h,i,d,O),w()||(N=a.utils.unwrapObservable(N));var Q=p(a.utils.unwrapObservable(e),P,I);J[Q]=N,I[Q]=!0;break;case"retained":var P=r(a.utils.unwrapObservable(e),M.value,E);N=r(d,M.value,E),o(N,P,h,i,d,O);var Q=p(a.utils.unwrapObservable(e),P,I);J[Q]=N,I[Q]=!0;break;case"deleted":N=r(d,M.value,E)}C.push({event:M.status,item:N})}d(J),h[i]&&h[i].arrayChanged&&a.utils.arrayForEach(C,function(a){h[i].arrayChanged(a.event,a.item)})}return d}function p(a,b,c){for(var d=0,e=a.length;d<e;d++){if(c[d]===!0)continue;if(a[d]===b)return d}return null}function q(c,d){var e;return d&&(e=d(c)),b.getType(e)==="undefined"&&(e=c),a.utils.unwrapObservable(e)}function r(b,c,d){var e=a.utils.arrayFilter(a.utils.unwrapObservable(b),function(a){return q(a,d)===c});if(e.length==0)throw new Error("When calling ko.update*, the key '"+c+"' was not found!");if(e.length>1&&u(e[0]))throw new Error("When calling ko.update*, the key '"+c+"' was not unique!");return e[0]}function s(b,c){return a.utils.arrayMap(a.utils.unwrapObservable(b),function(a){return c?q(a,c):a})}function t(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(c);else for(var d in a)b(d)}function u(a){var c=b.getType(a);return c==="object"&&a!==null&&c!=="undefined"}function v(a,b,c){var d=a||"";return b instanceof Array?a&&(d+="["+c+"]"):(a&&(d+="."),d+=c),d}function w(){var b=[],c=[];this.save=function(d,e){var f=a.utils.arrayIndexOf(b,d);f>=0?c[f]=e:(b.push(d),c.push(e))},this.get=function(d){var e=a.utils.arrayIndexOf(b,d);return e>=0?c[e]:undefined}}var c="__ko_mapping__",d=a.dependentObservable,e=0,f,g,h={include:["_destroy"],ignore:[],copy:[]},i=h;b.isMapped=function(b){var d=a.utils.unwrapObservable(b);return d&&d[c]},b.fromJS=function(b){if(arguments.length==0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");window.setTimeout(function(){e=0},0),e++||(f=[],g=new w);var d,h;arguments.length==2&&(arguments[1][c]?h=arguments[1]:d=arguments[1]),arguments.length==3&&(d=arguments[1],h=arguments[2]),h&&(d=k(d,h[c])),d=l(d);var i=o(h,b,d);return h&&(i=h),--e||window.setTimeout(function(){a.utils.arrayForEach(f,function(a){a&&a()})},0),i[c]=k(i[c],d),i},b.fromJSON=function(c){var d=a.utils.parseJson(c);return arguments[0]=d,b.fromJS.apply(this,arguments)},b.updateFromJS=function(a){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},b.updateFromJSON=function(a){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},b.toJS=function(d,e){i||b.resetDefaultOptions();if(arguments.length==0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(i.ignore instanceof Array){if(i.include instanceof Array){if(i.copy instanceof Array)return e=l(e,d[c]),b.visitModel(d,function(b){return a.utils.unwrapObservable(b)},e);throw new Error("ko.mapping.defaultOptions().copy should be an array.")}throw new Error("ko.mapping.defaultOptions().include should be an array.")}throw new Error("ko.mapping.defaultOptions().ignore should be an array.")},b.toJSON=function(c,d){var e=b.toJS(c,d);return a.utils.stringifyJson(e)},b.defaultOptions=function(){if(!(arguments.length>0))return i;i=arguments[0]},b.resetDefaultOptions=function(){i={include:h.include.slice(0),ignore:h.ignore.slice(0),copy:h.copy.slice(0)}},b.getType=function(a){return a&&typeof a=="object"&&a.constructor==(new Date).constructor?"date":typeof a},b.visitModel=function(d,e,f){f=f||{},f.visitedObjects=f.visitedObjects||new w,f.parentName||(f=l(f));var g,h=a.utils.unwrapObservable(d);if(!u(h))return e(d,f.parentName);e(d,f.parentName),g=h instanceof Array?[]:{},f.visitedObjects.save(d,g);var i=f.parentName;return t(h,function(d){if(f.ignore&&a.utils.arrayIndexOf(f.ignore,d)!=-1)return;var j=h[d];f.parentName=v(i,h,d);if(a.utils.arrayIndexOf(f.copy,d)===-1&&a.utils.arrayIndexOf(f.include,d)===-1&&h[c]&&h[c].mappedProperties&&!h[c].mappedProperties[d]&&!(h instanceof Array))return;var k;switch(b.getType(a.utils.unwrapObservable(j))){case"object":case"undefined":var l=f.visitedObjects.get(j);g[d]=b.getType(l)!=="undefined"?l:b.visitModel(j,e,f);break;default:g[d]=e(j,f.parentName)}}),g}});