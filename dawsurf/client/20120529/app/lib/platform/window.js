(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore","lib/platform/document"],function(b,c,d){var e;return e=function(){function c(){this._refresh_cache=a(this._refresh_cache,this),this._resize_or_zoom_by_aspect=a(this._resize_or_zoom_by_aspect,this),this._resize_or_zoom_by_factor=a(this._resize_or_zoom_by_factor,this),this._get_zoom_factor=a(this._get_zoom_factor,this),this._get_aspect=a(this._get_aspect,this),this.init=a(this.init,this)}return c.prototype._ASPECT_EPSILON=.01,c.prototype.init=function(){var c,e;return this._refresh_cache(),d.width_raw()!=null?(c=[this._resize_or_zoom_by_factor,this._get_zoom_factor()],this._resize_or_zoom=c[0],this._zoom_factor=c[1]):(e=[this._resize_or_zoom_by_aspect,this._get_aspect()],this._resize_or_zoom=e[0],this._aspect=e[1]),b(window).on("resize",a(function(){return this._resize_or_zoom()},this))},c.prototype.reload=function(){return window.location.href=window.location.href},c.prototype.on_resize=function(){},c.prototype.on_zoom=function(){},c.prototype._get_aspect=function(){return this.width/this.height},c.prototype._get_zoom_factor=function(){return d.width_raw()/this.width},c.prototype._resize_or_zoom_by_factor=function(){var a;return a=this._zoom_factor,this._refresh_cache(),this._zoom_factor=this._get_zoom_factor(),this._zoom_factor===a?this.on_resize({window:this}):this.on_zoom({window:this,is_zoom_out:this._zoom_factor<a})},c.prototype._resize_or_zoom_by_aspect=function(){var a,b,c;return c=[this.height,this._aspect],b=c[0],a=c[1],this._refresh_cache(),Math.abs((this._aspect=this._get_aspect())-a)<this._ASPECT_EPSILON?this.on_zoom({window:this,is_zoom_out:this.height>b}):this.on_resize({window:this})},c.prototype._refresh_cache=function(){return this.height=window.innerHeight,this.width=window.innerWidth},c}(),new e})}).call(this);