(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","./cell.arranger/mason","./cell.arranger/helper","plugin/constants","lib/guardian"],function(b,c,d,e){var f;return f=function(){function d(){this._arrange_wild=a(this._arrange_wild,this),this.arrange_track=a(this.arrange_track,this)}return d.prototype._GROUP_ANIMATE_DURATION_MS=500,d.prototype.arrange_track=function(a){return this._arrange_wild(a.$track,a.x_size)},d.prototype._arrange_wild=function(a,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;r=b(".wild > .cells:not(:empty)",a),t=[];for(o=0,q=r.length;o<q;o++)g=r[o],e=b(g),f=b(".group",e),j=function(){var a,c,d;d=[];for(a=0,c=f.length;a<c;a++)h=f[a],d.push(b(h).attr("data-group-name"));return d}(),l=function(){var a,c,d;d=[];for(a=0,c=f.length;a<c;a++)h=f[a],d.push(b(h).attr("id"));return d}(),i=function(){var a,c,d;d=[];for(a=0,c=l.length;a<c;a++)n=l[a],d.push(b("#"+n+", .param[data-group-id='"+n+"']:not(.hidden)",e));return d}(),k=function(){var a,b,c;c=[];for(a=0,b=i.length;a<b;a++)h=i[a],c.push(h.length);return c}(),m=c.build(function(){u=[];for(var a=1,b=j.length;1<=b?a<=b:a>=b;1<=b?a++:a--)u.push(a);return u}.apply(this),k,d),t.push(this._apply_matrix(e,i,m));return t},d.prototype._apply_matrix=function(a,c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r;j=function(){var a,b,d;d=[];for(a=0,b=c.length;a<b;a++)h=c[a],d.push(0);return d}();for(k=0,p=d.length;k<p;k++){n=d[k];for(l=0,q=n.length;l<q;l++){g=n[l];if((i=Math.abs(d[k][l])-1)===-1)continue;f=b(c[i][j[i]++]),r=[l*e.CELL_SIZE,k*e.CELL_SIZE],m=r[0],o=r[1],j[i]===1?f.animate({left:m,top:o},this._GROUP_ANIMATE_DURATION_MS):f.css({left:m,top:o}),l<n.length-1&&i!==Math.abs(d[k][l+1])-1?f.addClass("sep-r"):f.removeClass("sep-r"),k<d.length-1&&i!==Math.abs(d[k+1][l])-1?f.addClass("sep-b"):f.removeClass("sep-b")}}return a.height(k*e.CELL_SIZE)},d}(),new f})}).call(this);