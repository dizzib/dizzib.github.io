(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["./balancer","./builder","./defragger","./laner","./stitcher","lib/guardian"],function(b,c,d,e,f){var g;return g=function(){function g(){this._append_wild_group=a(this._append_wild_group,this),this._extract_oversized_wild_group=a(this._extract_oversized_wild_group,this),this.build=a(this.build,this)}return g.prototype._WILD_GROUP_ID=1,g.prototype.build=function(a,b,c){var d;return this._extract_oversized_wild_group(a,b,c,d=[]),d.concat(this._build(a,b,c))},g.prototype._build=function(a,g,h){var i,j,k,l;j=e.create(g,h),c.build(j,a,g);for(k=0,l=j.length;k<l;k++)i=j[k],i.matrix=d.defrag(i.matrix);return f.stitch(b.balance(j))},g.prototype._extract_oversized_wild_group=function(a,b,c,d){var e,f,g;if((e=_.indexOf(a,this._WILD_GROUP_ID))===-1)return!1;if(this._check_is_oversized_wild_group(a,b,c,e))return this._append_wild_group(b[e],c,d),[].splice.apply(a,[e,e-e+1].concat(f=[])),f,[].splice.apply(b,[e,e-e+1].concat(g=[])),g},g.prototype._append_wild_group=function(b,c,d){var e,f,g,h;for(e=1,g=Math.ceil(b/c);1<=g?e<=g:e>=g;1<=g?e++:e--)d.push(_.map(function(){h=[];for(var a=1;1<=c?a<=c:a>=c;1<=c?a++:a--)h.push(a);return h}.apply(this),a(function(){return this._WILD_GROUP_ID},this)));return d[0][0]=-this._WILD_GROUP_ID},g.prototype._check_is_oversized_wild_group=function(a,b,c,d){var f,g,h,i,j,k;return j=[b[d],e.create(b,c)],g=j[0],h=j[1],h.count<=1?!1:(k=[h[0].x_size,_.reduce(b,function(a,b){return a+b},0)],i=k[0],f=k[1],g/f>i/c)},g}(),new g})}).call(this);