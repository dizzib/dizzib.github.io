(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["underscore","lib/guardian"],function(b){var c;return c=function(){function c(){this._get_lane_x_size_bestfit=a(this._get_lane_x_size_bestfit,this),this._get_lane_x_sizes=a(this._get_lane_x_sizes,this),this._check_is_multi_lane=a(this._check_is_multi_lane,this),this.create=a(this.create,this)}return c.prototype._LANE_SPLIT_X_SIZE_MIN=6,c.prototype._CACHE_X_SIZE_MAX=99,c.prototype._WIDE_LANE_X_SIZE_THRESHOLD=32,c.prototype.create=function(a,c){var d,e,f;return this._lane_x_sizes===void 0&&(this._lane_x_sizes=function(){var a,b;b=[];for(f=0,a=this._CACHE_X_SIZE_MAX;0<=a?f<=a:f>=a;0<=a?f++:f--)b.push(this._get_lane_x_sizes(f));return b}.call(this)),d=this._check_is_multi_lane(a,c),e=d?this._lane_x_sizes[c]:[c],b.map(e,function(a){return{x_size:a,matrix:[[]]}})},c.prototype._check_is_multi_lane=function(a,b){var c,d;return b<this._LANE_SPLIT_X_SIZE_MIN||b>this._CACHE_X_SIZE_MAX?!1:(d=b/this._get_lane_x_size_bestfit(b),c=a.length/d,c>1)},c.prototype._get_lane_x_sizes=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a<this._LANE_SPLIT_X_SIZE_MIN?[a]:(f=this._get_lane_x_size_bestfit(a),i=[f,f+1,f-1],j=function(){var b,c,d;d=[];for(b=0,c=i.length;b<c;b++)h=i[b],d.push(Math.min(a%h,h-a%h));return d}(),d=b.min(j),e=i[j.indexOf(d)],d===0?b.map(function(){p=[];for(var b=1,c=a/e;1<=c?b<=c:b>=c;1<=c?b++:b--)p.push(b);return p}.apply(this),function(){return e}):(assert(function(){return d===1||d===2}),c=(a+d)%e===0?1:-1,g=a+d*c,k=b.map(function(){q=[];for(var a=1,b=g/e;1<=b?a<=b:a>=b;1<=b?a++:a--)q.push(a);return q}.apply(this),function(){return e}),d===1?k[Math.floor(k.length/2)]-=c:(k[0]-=c,k[k.length-1]-=c),k))},c.prototype._get_lane_x_size_bestfit=function(a){return a<this._WIDE_LANE_X_SIZE_THRESHOLD?4:5},c}(),new c})}).call(this);