(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore","./box","plugin/lib/datatype.extension/string","lib/guardian","css!./cell","css!./group"],function(b,c,d){var e;return e=function(){function c(){this._create_group=a(this._create_group,this),this.add=a(this.add,this),this.init=a(this.init,this)}return c.prototype.init=function(a){return assert(function(){return a!=null?a.$desk:void 0}).on("safe-tap",".box.wild > .cells > .group",{on_toggle:this.on_toggle},function(a){var c,d;return(d=b(this)).toggleClass("collapsed"),(c=d.siblings(".param[data-group-id='"+d.attr("id")+"']")).toggleClass("hidden"),a.data.on_toggle({$target:d}),d.animate({left:"+=0"},0,function(){return c.indicate(),d.indicate()}),!1}),a.$desk.on("safe-tap",".box.tame > .cells > .group",{toggle:d.toggle},function(a){return a.data.toggle(b(this))})},c.prototype.on_toggle=function(){},c.prototype.add=function(a){var b;assert(function(){return a.$cells}).append(b=this._create_group(a));if(b.parents(".box.wild").length)return b.addClass("collapsed")},c.prototype._create_group=function(a){var c,d;return c=b("<div/>").attr({id:a.uid,"class":"cell group tint_"+a.tint,"data-group-name":a.name}),d=b("<h3/>").html(a.name.fracture()).appendTo(c),a.name.length<6&&d.addClass("font_enlarge"),a.name.length>10&&d.addClass("font_reduce"),c},c}(),new e})}).call(this);