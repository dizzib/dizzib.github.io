(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore","lib/guardian","css!./box","css!./cells"],function(b,c){var d;return d=function(){function c(){this._create_box=a(this._create_box,this),this.toggle=a(this.toggle,this),this.add=a(this.add,this),this.init=a(this.init,this)}return c.prototype.init=function(a){return assert(function(){return a!=null?a.$desk:void 0}).on("safe-tap",".box.tame > .head",{toggle:this.toggle},function(a){return a.data.toggle(b(this))})},c.prototype.on_group_add=function(){},c.prototype.on_toggle=function(){},c.prototype.add=function(a){var c,d,e,f,g,h,i,j,k,l;c=this._create_box(a),a.type==="wild"&&(d=b("<div/>").attr({"class":"cells"}).appendTo(c)),j=a.groups,l=[];for(h=0,i=j.length;h<i;h++)k=j[h],g=k[0],e=k[1],f=k[2],a.type==="tame"&&(d=b("<div/>").attr({"class":"cells"}).appendTo(c)),l.push(this.on_group_add({uid:g,name:e,tint:f,$cells:d}));return l},c.prototype.toggle=function(a){var c;return c=a.parents(".box").toggleClass("hidden"),b(".group:not(:hidden), .head:not(:hidden)",c).indicate(),this.on_toggle({$target:c}),!1},c.prototype._create_box=function(a){var c,d,e,f;return d=assert(function(){return b("#"+assert(function(){return a.device_uid})+".device > .body")}),c=b("<div/>").attr({"class":"box "+a.type}).appendTo(d),a.type==="tame"&&(c.addClass("hidden"),f=b("<div/>").attr({"class":"head cell"}).appendTo(c),e=b("<h3/>").html(a.name.fracture()).appendTo(f)),c},c}(),new d})}).call(this);