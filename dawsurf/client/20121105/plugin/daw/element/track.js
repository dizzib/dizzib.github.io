(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore","plugin/lib/ui/scrollport","plugin/model/setting/is-super-scroll","lib/guardian","css!./track"],function(b,c,d,e){var f;return new(f=function(){function f(){this._expand=a(this._expand,this),this._collapse=a(this._collapse,this),this.set_height=a(this.set_height,this),this.rename=a(this.rename,this),this.remove=a(this.remove,this),this.move=a(this.move,this),this.insert=a(this.insert,this),this.expand=a(this.expand,this),this.disable=a(this.disable,this),this.add=a(this.add,this),this.init=a(this.init,this)}return f.prototype.init=function(a){return a.$desk.on("safe-tap","#tracks > .track > .head",{collapse:this._collapse},function(a){return a.data.collapse({$track:b(this).parent(),is_user:!0}),a.handled=!0}),this.on_init(a)},f.prototype.on_create=function(){},f.prototype.on_add=function(){},f.prototype.on_collapse=function(){},f.prototype.on_init=function(){},f.prototype.on_insert=function(){},f.prototype.on_move=function(){},f.prototype.on_remove=function(){},f.prototype.on_toggle=function(){},f.prototype.add=function(a){var b;return this.on_create(b=this._create(a)),this.on_add(c.extend(a,{$track:b}))},f.prototype.append=function(a,b){return b.appendTo(this._get_body_i(this._get_target(a)))},f.prototype.disable=function(a){return assert(function(){return a.addClass("disabled").hasClass("track")}),this._collapse({$track:a,is_user:!1})},f.prototype.enable=function(a){return assert(function(){return a.removeClass("disabled").hasClass("track")})},f.prototype.expand=function(a){return this._expand(a)},f.prototype.insert=function(a){var b,c;return c=[this._create(a),this._get_target(a)],a.$track=c[0],b=c[1],a.target_placement==="Before"?a.$track.insertBefore(b):a.$track.insertAfter(b),this.on_insert(a)},f.prototype.is_parent=function(a,b){return a.is(b!=null?b.parents(".track"):void 0)},f.prototype.move=function(a){var b;return b=[this._get_track(a),this._get_target(a)],a.$track=b[0],a.$target=b[1],this.on_move(a)},f.prototype.remove=function(a){var b,c=this;return(b=this._get_track(a)).fadeOut(function(){return c.on_remove(a),b.remove()})},f.prototype.rename=function(a){return this._get_track(a).find("h1").html(a.name.fracture())},f.prototype.set_height=function(a,b){return this._get_body_i(a).height(b),this._get_body_o(a).height(b)},f.prototype.set_width=function(a,b){return this._get_body_i(a).width(b),this._get_body_o(a).width(b)},f.prototype._create=function(a){var c;return c=b(b.zen("#"+a.uid+".track.disabled>((.head>h1{"+a.name.fracture()+"})+(.body-o>.body-i)+(.foot))")),e.value()&&d.init(c.find(".body-i"),{x:!1}),c},f.prototype._collapse=function(a){this.on_collapse(a),this.on_toggle(c.extend(a,{is_collapse:!0}));if(a.is_user)return this._indicate(a)},f.prototype._expand=function(a){return this.on_toggle(c.extend(a,{is_expand:!0})),this._indicate(a)},f.prototype._get_body_i=function(a){return a.find("> .body-o > .body-i")},f.prototype._get_body_o=function(a){return a.find("> .body-o")},f.prototype._get_target=function(a){return b("#"+assert(function(){return a.target_uid})+".track")},f.prototype._get_track=function(a){return b("#"+assert(function(){return a.uid})+".track")},f.prototype._indicate=function(a){return a.$track.find("h1").indicate()},f}())})}).call(this);