(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","underscore","lib/guardian","css!./toolbar"],function(b,c){var d;return new(d=function(){function d(){this._destroy_keyboard_shortcuts=a(this._destroy_keyboard_shortcuts,this),this._create_keyboard_shortcuts=a(this._create_keyboard_shortcuts,this),this._create_tools=a(this._create_tools,this),this.kill=a(this.kill,this),this.init=a(this.init,this)}return d.prototype._key_mappings=[{keycode:b.ui.keyCode.ESCAPE,fn:"on_exit"},{keycode:b.ui.keyCode.SPACE,fn:"toggle"}],d.prototype.init=function(){return this._$toolbar=b(b.zen("#toolbar")).appendTo(this._div_root),this._create_tools(),this._create_keyboard_shortcuts(),this.on_growl("Press ESC to return to homepage")},d.prototype.kill=function(){return this._$toolbar.remove(),this._destroy_keyboard_shortcuts()},d.prototype.on_exit=function(){},d.prototype.on_growl=function(){},d.prototype.toggle=function(a){if(a!=null?!a.handled:!void 0)return this._$toolbar.toggle()},d.prototype._create_tools=function(){var a=this;return b(b.zen(".tool{Exit}")).appendTo(this._$toolbar).on("click",function(){return a.on_exit()})},d.prototype._create_keyboard_shortcuts=function(){var a=this;return b(document).on("keydown",function(b){var d;if((d=c.find(a._key_mappings,function(a){return b.which===a.keycode}))==null)return;return a[d.fn](),b.preventDefault()})},d.prototype._destroy_keyboard_shortcuts=function(){return b(document).off("keydown")},d}())})}).call(this);