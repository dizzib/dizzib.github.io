(function(){var t=function(t,o){return function(){return t.apply(o,arguments)}};define(["jquery","underscore","css!./toolbar"],function(o,e){var r;return new(r=function(){function r(){this._destroy_keyboard_shortcuts=t(this._destroy_keyboard_shortcuts,this);this._create_keyboard_shortcuts=t(this._create_keyboard_shortcuts,this);this._create_tools=t(this._create_tools,this);this.kill=t(this.kill,this);this.init=t(this.init,this)}r.prototype._key_mappings=[{keycode:o.ui.keyCode.ESCAPE,fn:"on_exit"},{keycode:o.ui.keyCode.SPACE,fn:"toggle"}];r.prototype.init=function(){this._$toolbar=o(o.zen("#toolbar")).appendTo(this._div_root);this._create_tools();this._create_keyboard_shortcuts();return this.on_growl("Press ESC to return to homepage")};r.prototype.kill=function(){this._$toolbar.remove();return this._destroy_keyboard_shortcuts()};r.prototype.on_exit=function(){};r.prototype.on_growl=function(){};r.prototype.toggle=function(t){if(!(t!=null?t.handled:void 0)){return this._$toolbar.toggle()}};r.prototype._create_tools=function(){var t=this;return o(o.zen(".tool{Exit}")).appendTo(this._$toolbar).on("click",function(){return t.on_exit()})};r.prototype._create_keyboard_shortcuts=function(){var t=this;return o(document).on("keydown",function(o){var r;if((r=e.find(t._key_mappings,function(t){return o.which===t.keycode}))==null){return}t[r.fn]();return o.preventDefault()})};r.prototype._destroy_keyboard_shortcuts=function(){return o(document).off("keydown")};return r}())})}).call(this);