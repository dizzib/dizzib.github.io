(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define(["jquery","underscore","lib/guardian","./box","plugin/lib/ui/scrollport","plugin/model/setting/is-super-scroll","plugin/element/track","text!./devices.html","css!./devices"],function(e,i,n,o,s,r,_,h){var d;return new(d=function(){function n(){this._set_dimension=t(this._set_dimension,this);this._get_body_i=t(this._get_body_i,this);this._create=t(this._create,this);this.set_width=t(this.set_width,this);this.set_height=t(this.set_height,this);this.remove=t(this.remove,this);this.get_volume=t(this.get_volume,this);this.create=t(this.create,this);this.add=t(this.add,this)}n.prototype.on_init=function(){};n.prototype.on_kill=function(){};n.prototype.add=function(t){t.$device.appendTo(this._get_body_i(_.get_by_uid(t.target_uid)));if(this._is_sole_device(t)){return this.on_init(_.get_by_descendant(t.$device))}};n.prototype.create=function(t){return _.append(t,this._create(t.$track))};n.prototype.get_volume=function(t){return o.get_volume(this._get_visible(t))};n.prototype.remove=function(t){if(this._is_sole_device(t)){return this.on_kill(_.get_by_descendant(t.$device))}};n.prototype.set_height=function(t,e){return this._set_dimension(t,"height",e)};n.prototype.set_width=function(t,e){return this._set_dimension(t,"width",e)};n.prototype._create=function(t){var n;if(this._render==null){this._render=i.template(h)}n=e(this._render());if(r.value()){s.init(n.find(".body-i"),{x:false})}return n};n.prototype._get_body_i=function(t){return this._get_body_o(t).find("> .body-i")};n.prototype._get_body_o=function(t){return t.find(".devices > .body-o")};n.prototype._is_sole_device=function(t){return t.$device.siblings(".device").length===0};n.prototype._get_visible=function(t){return t.find(".device:not(.hidden)")};n.prototype._set_dimension=function(t,e,i){var n,o,_,h;h=[this._get_body_i,this._get_body_o];for(o=0,_=h.length;o<_;o++){n=h[o];n(t)[e](i)}if(r.value()){return s.refresh(this._get_body_o(t))}};return n}())})}).call(this);