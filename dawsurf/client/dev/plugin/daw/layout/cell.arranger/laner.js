(function(){var t=function(t,_){return function(){return t.apply(_,arguments)}};define(["underscore","lib/guardian"],function(_,e){var i;return new(i=function(){function i(){this._get_lane_x_size_bestfit=t(this._get_lane_x_size_bestfit,this);this._get_lane_x_sizes=t(this._get_lane_x_sizes,this);this._check_is_multi_lane=t(this._check_is_multi_lane,this);this.create=t(this.create,this)}i.prototype._LANE_SPLIT_X_SIZE_MIN=6;i.prototype._CACHE_X_SIZE_MAX=99;i.prototype._WIDE_LANE_X_SIZE_THRESHOLD=32;i.prototype.create=function(t,e){var i,n,r;if(this._lane_x_sizes===void 0){this._lane_x_sizes=function(){var t,_,e;e=[];for(r=t=0,_=this._CACHE_X_SIZE_MAX;0<=_?t<=_:t>=_;r=0<=_?++t:--t){e.push(this._get_lane_x_sizes(r))}return e}.call(this)}i=this._check_is_multi_lane(t,e);n=i?this._lane_x_sizes[e]:[e];return _.map(n,function(t){return{x_size:t,matrix:[[]]}})};i.prototype._check_is_multi_lane=function(t,_){var e,i;if(_<this._LANE_SPLIT_X_SIZE_MIN||_>this._CACHE_X_SIZE_MAX){return false}i=_/this._get_lane_x_size_bestfit(_);e=t.length/i;return e>1};i.prototype._get_lane_x_sizes=function(t){var i,n,r,s,u,a,h,o,f,l,c,p,E,I,x;if(t<this._LANE_SPLIT_X_SIZE_MIN){return[t]}s=this._get_lane_x_size_bestfit(t);h=[s,s+1,s-1];o=function(){var _,e,i;i=[];for(_=0,e=h.length;_<e;_++){a=h[_];i.push(Math.min(t%a,a-t%a))}return i}();n=_.min(o);r=h[o.indexOf(n)];if(n===0){return _.map(function(){I=[];for(var _=1,e=t/r;1<=e?_<=e:_>=e;1<=e?_++:_--){I.push(_)}return I}.apply(this),function(){return r})}e.assert(function(){return n===1||n===2});i=(t+n)%r===0?+1:-1;u=t+n*i;f=_.map(function(){x=[];for(var t=1,_=u/r;1<=_?t<=_:t>=_;1<=_?t++:t--){x.push(t)}return x}.apply(this),function(){return r});if(n===1){f[Math.floor(f.length/2)]-=i}else{_.first(f-=i);_.last(f-=i)}return f};i.prototype._get_lane_x_size_bestfit=function(t){if(t<this._WIDE_LANE_X_SIZE_THRESHOLD){return 4}else{return 5}};return i}())})}).call(this);