(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define(["jquery","underscore","lib/guardian","input/touch"],function(e,n,r,i){var o;return new(o=function(){function o(){this._on_touchmove=t(this._on_touchmove,this);this.stop_sampling=t(this.stop_sampling,this);this.touch_tap=t(this.touch_tap,this);this.touch_start=t(this.touch_start,this)}o.prototype._MOVE_THRESHOLD=10;o.prototype._XY_TOLERANCE=0;o.prototype.on_trigger=function(){};o.prototype.touch_start=function(t,n){var r,o,_=this;if(this._$target!=null){return}r=i.get_raw_event(n);o=[r.pageX,r.pageY,e(n.target)],this._x0=o[0],this._y0=o[1],this._$target=o[2];this._$target.on(i.event_name_move,function(e){return _._on_touchmove(t,e)});return this._$target.on(i.event_name_end,function(t){return _.stop_sampling()})};o.prototype.touch_tap=function(t,e){return this.on_trigger(t,n.extend(e,{is_tap:true}))};o.prototype.stop_sampling=function(){if(!this._$target){return}this._$target.off(i.event_name_move);return this._$target=void 0};o.prototype._on_touchmove=function(t,e){var o,_,s,u,a,h,p,g=this;r.assert(function(){return g._$target!=null});e.preventDefault();s=i.get_raw_event(e);h=[s.pageX-this._x0,s.pageY-this._y0],o=h[0],_=h[1];p=[Math.abs(o),Math.abs(_)],u=p[0],a=p[1];if(!(u>this._MOVE_THRESHOLD||a>this._MOVE_THRESHOLD)){return}this.stop_sampling();if(!(u>a&&u/a>this._XY_TOLERANCE)){return}return this.on_trigger(t,n.extend(s,{is_tap:false}))};return o}())})}).call(this);