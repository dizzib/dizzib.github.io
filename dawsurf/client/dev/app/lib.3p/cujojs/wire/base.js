(function(e){e(["when","./lib/object","./lib/functional","./lib/component","./lib/invoker"],function(e,n,r,t,o){var i,u,c,f;i=e.all;u=e.chain;c={};function s(e){return Array.isArray(e)?e:[e]}function a(n,r,t,o){return e(o(t,n,r.path),function(e){return r.invoke(n,s(e))})}function l(e,n){var r=e.options;if(typeof r=="string"){return a(r,e,[],n)}else{var t,o;t=[];for(o in r){t.push(a(o,e,r[o],n))}return i(t)}}function p(e,n){var r,t;for(r in n){t=n[r];if(!(r in e)||e[r]!==t&&(!(r in c)||c[r]!==t)){e[r]=t}}return e}function y(n,r,t){r=typeof r=="string"?t.resolveRef(r):t(r);return e(r,p.bind(null,n))}function v(n,r,t){var o,i;o=r.target;i=r.options;if(!Array.isArray(i)){i=[i]}u(e.reduce(i,function(e,n){return y(e,n,t)},o),n)}function d(e,n){e.resolve(n.literal)}function h(n,r,t){var o,i;o=r.prototype;i=typeof o==="string"?t.resolveRef(o):t(o);e(i,Object.create).then(n.resolve,n.reject)}function g(n,r,t){var o,i,u;o=r.options;i=r.path;u=r.set.bind(r);e.map(Object.keys(r.options),function(e){return t(o[e],e,r.path).then(function(n){u(e,n)})}).then(n.resolve,n.reject)}function m(e,n,r){r(n.invoker).then(function(e){return o(e.method,e.args)}).then(e.resolve,e.reject)}function b(e,n,r){u(l(n,r),e)}function j(e){return{get:function(n){return e[n]},set:function(n,r){e[n]=r;return r},invoke:function(n,r){if(typeof n==="string"){n=e[n]}return n.apply(e,r)},destroy:function(){},clone:function(n){if(typeof e!="object"){return e}else if(typeof e=="function"){return e.bind()}if(!n){n={}}return w(e,n)}}}function w(e,n){var r,t,o,i;r=n.deep;t=n.inherited;if(typeof e!="object"){return e}else if(e instanceof Date){return new Date(e.getTime())}else if(e instanceof RegExp){return new RegExp(e)}else if(Array.isArray(e)){return r?e.map(function(e){return w(e,n)}):e.slice()}else{o=e.constructor?new e.constructor:{};for(i in e){if(t||e.hasOwnProperty(i)){o[i]=r?w(e[i],n):e[i]}}return o}}function x(e,n){return n()}function k(e,n,r){u(r.loadModule(n.module,n),e)}function A(n,r,t){var o,i;if(t.resolver.isRef(r.clone.source)){o=r.clone.source;i=r.clone}else{o=r.clone;i={}}e(t(o),function(n){return e(t.getProxy(n),function(e){if(!e.clone){throw new Error("No clone function found for "+r.id)}return e.clone(i)})}).then(n.resolve,n.reject)}function R(n,r,o){var i,c,f,a,l;a=r.id;i=r.create;if(typeof i=="string"){l=o.loadModule(i,r)}else if(o.resolver.isRef(i)){l=o(i)}else{l=o(i);c=i.args;f=i.isConstructor}u(e(l,p),n);function p(n){function r(e){return t(n,e,f)}if(typeof n=="function"){return c?e(o(s(c)),r):r([])}else{return Object.create(n)}}}function O(n,t,o){var i;t=t.compose;if(typeof t=="string"){i=r.compose.parse(f,t,o)}else{i=e(o(t),function(e){return r.compose(e)})}e.chain(i,n)}return{wire$plugin:function(n,r){var t,o;t=[];e(r,function(){return e.reduce(t,x,0)});function i(e,n,r){t.push(function o(){return l(n,r)});e.resolve()}o={factories:{module:k,create:R,literal:d,prototype:h,clone:A,compose:O,invoker:m},facets:{properties:{configure:g},mixin:{configure:v},init:{initialize:b},ready:{ready:b},destroy:{ready:i}},proxies:[j]};o.facets.introduce=o.facets.mixin;return o}}})})(typeof define=="function"?define:function(e,n){module.exports=n.apply(this,e.map(function(e){return require(e)}))});